# ToolBridge MCP Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# Tenant Configuration (Optional)
# =============================================================================
# B2C/B2B Hybrid Pattern (Pattern 3) - Leave TENANT_ID empty for production
#
# Multi-tenant mode (TENANT_ID not set or empty):
#   - B2C users without organization memberships → tenant_thinkpen_b2c (backend default)
#   - B2B users with single organization → organization ID
#   - Multi-org users → must select organization (not yet implemented)
#   Tenant resolution happens via backend /v1/auth/tenant endpoint
#
# Single-tenant mode (TENANT_ID set):
#   - For smoke testing only, NOT for production
#   - All users forced to same tenant (useful for local testing)
#
# TOOLBRIDGE_TENANT_ID=test-tenant-123  # Uncomment only for smoke testing

# =============================================================================
# Go API Connection
# =============================================================================
TOOLBRIDGE_GO_API_BASE_URL=http://localhost:8080

# =============================================================================
# WorkOS AuthKit Configuration (REQUIRED)
# =============================================================================

# WorkOS AuthKit Provider Settings
# These configure per-user authentication via WorkOS AuthKit OAuth 2.1 + PKCE
# Users authenticate through claude.ai web UI → browser OAuth flow

# AuthKit domain from WorkOS dashboard (e.g., "toolbridge.authkit.app")
TOOLBRIDGE_AUTHKIT_DOMAIN=toolbridge.authkit.app

# Public URL of this MCP server (used in OAuth metadata and resource identification)
# FastMCP automatically exposes /.well-known/oauth-protected-resource/{path} metadata
#
# NOTE: This should be the root URL without the /mcp path
# The MCP endpoint will be available at: {PUBLIC_BASE_URL}/mcp
# Example: https://toolbridge-mcp-staging.fly.dev/mcp
#
# NOTE: When using WorkOS AuthKit with Dynamic Client Registration (DCR),
# set MCP_OAUTH_AUDIENCE="" (empty) in the Go backend to skip audience validation.
# With DCR, tokens have unpredictable client IDs as audience, not the resource URL.
TOOLBRIDGE_PUBLIC_BASE_URL=https://toolbridge-mcp-staging.fly.dev

# Backend API Configuration
# The Go API that MCP calls after token exchange
TOOLBRIDGE_BACKEND_API_AUDIENCE=https://toolbridgeapi.erauner.dev

# JWT Signing Key (Optional - for token exchange without backend endpoint)
# Only needed if using Option 2 (MCP-issued JWTs)
# Generate with: openssl genrsa -out private_key.pem 2048
# TOOLBRIDGE_JWT_SIGNING_KEY=$(cat private_key.pem)

# =============================================================================
# Server Configuration
# =============================================================================
TOOLBRIDGE_HOST=0.0.0.0
TOOLBRIDGE_PORT=8001

# =============================================================================
# Logging
# =============================================================================
TOOLBRIDGE_LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# =============================================================================
# Security
# =============================================================================
# Maximum acceptable timestamp skew in seconds (default: 300 = 5 minutes)
TOOLBRIDGE_MAX_TIMESTAMP_SKEW_SECONDS=300
